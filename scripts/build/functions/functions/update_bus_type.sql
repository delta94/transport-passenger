create or replace FUNCTION UPDATE_BUS_TYPE(ID1 IN  BUS_TYPES.ID%TYPE, BRAND1 IN  BUS_TYPES.BRAND%TYPE, MODEL1 IN  BUS_TYPES.MODEL%TYPE,SEATS1 IN  BUS_TYPES.SEATS%TYPE
,SPEED1 IN  BUS_TYPES.SPEED%TYPE, CAPACITY_FUEL1 IN  BUS_TYPES.CAPACITY_FUEL%TYPE, MASS_NO_LOAD1 IN  BUS_TYPES.MASS_NO_LOAD%TYPE, MASS_ALL1 IN  BUS_TYPES.MASS_ALL%TYPE
, HEIGHT1 IN  BUS_TYPES.HEIGHT%TYPE, WIDTH1 IN  BUS_TYPES.WIDTH%TYPE, LENGTH1 IN  BUS_TYPES.LENGTH%TYPE) 
RETURNS INTEGER 
AS $$
DECLARE
    ROW_COUNT INTEGER := 0;
    ROW_BUS_TYPE BUS_TYPES%ROWTYPE;
	v_result varchar(250);
BEGIN
    SELECT COUNT(*) INTO ROW_COUNT FROM BUS_TYPES WHERE ID = ID1;
    IF ROW_COUNT = 0 THEN
		select show_message('ID DOES NOT EXIST !') into v_result;
        RETURN 1;
    ELSE
        SELECT * INTO ROW_BUS_TYPE FROM BUS_TYPES WHERE ID = ID1;
        IF BRAND1 IS NULL THEN
            BRAND1 := ROW_BUS_TYPE.BRAND;
        END IF;
        
        IF MODEL1 IS NULL THEN
            MODEL1 := ROW_BUS_TYPE.MODEL;
        END IF;
        
        IF SPEED1 IS NULL THEN
            SPEED1 := ROW_BUS_TYPE.SPEED;
        END IF;
        
        IF CAPACITY_FUEL1 IS NULL THEN
            CAPACITY_FUEL1 := ROW_BUS_TYPE.CAPACITY_FUEL;
        END IF;
        
        IF MASS_NO_LOAD1 IS NULL THEN
            MASS_NO_LOAD1 := ROW_BUS_TYPE.MASS_NO_LOAD;
        END IF;
        
        IF MASS_ALL1 IS NULL THEN
            MASS_ALL1 := ROW_BUS_TYPE.MASS_ALL;
        END IF;
        
        IF HEIGHT1 IS NULL THEN
            HEIGHT1 := ROW_BUS_TYPE.HEIGHT;
        END IF;
        
        IF WIDTH1 IS NULL THEN
            WIDTH1 := ROW_BUS_TYPE.WIDTH;
        END IF;
        
        IF LENGTH1 IS NULL THEN
            LENGTH1 := ROW_BUS_TYPE.LENGTH;
        END IF;
        
        update bus_types set BRAND = BRAND1, MODEL = MODEL1, SEATS = SEATS1,SPEED = SPEED1, CAPACITY_FUEL = CAPACITY_FUEL1, MASS_NO_LOAD = MASS_NO_LOAD1, 
        MASS_ALL = MASS_ALL1, HEIGHT = HEIGHT1,WIDTH = WIDTH1, LENGTH = LENGTH1, CREATED_AT = CREATED_AT, UPDATED_AT = CURRENT_TIMESTAMP;
        select show_message('UPDATING BUS_TYPES IS SUCCESSFUL !') into v_result;
        
    END IF;
    RETURN 0;
END ;
$$ language plpgsql;